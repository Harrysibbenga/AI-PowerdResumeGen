---
// Header.astro
---

<header class="bg-white shadow-sm">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
        <a href="/" class="flex items-center gap-2">
            <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-8 w-8 text-primary-600"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                ></path>
            </svg>
            <span class="text-xl font-bold"
                >Resume<span class="text-primary-600">AI</span></span
            >
        </a>

        <nav>
            <ul class="flex items-center gap-6">
                <li>
                    <a
                        href="/pricing"
                        class="text-gray-600 hover:text-primary-600">Pricing</a
                    >
                </li>
                <li>
                    <a
                        href="/templates"
                        class="text-gray-600 hover:text-primary-600"
                        >Templates</a
                    >
                </li>
                <li class="auth-buttons" id="not-logged-in">
                    <div class="flex items-center gap-3">
                        <a
                            href="/login"
                            class="text-gray-700 hover:text-primary-600"
                            >Log In</a
                        >
                        <a
                            href="/register"
                            class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors"
                        >
                            Sign Up
                        </a>
                    </div>
                </li>
                <li class="auth-buttons hidden" id="logged-in">
                    <div class="flex items-center gap-3">
                        <a
                            href="/dashboard"
                            class="text-gray-700 hover:text-primary-600"
                            >Dashboard</a
                        >
                        <button
                            id="logout-btn"
                            class="text-gray-700 hover:text-red-600 transition-colors"
                        >
                            Log Out
                        </button>
                    </div>
                </li>
            </ul>
        </nav>
    </div>
</header>

<script>
    // We'll move the Firebase logic to a utility file and import it here
    import {
        auth,
        handleAuthStateChanged,
        handleLogout,
    } from "../../utils/firebase";

    // Get DOM elements
    const loggedInButtons = document.getElementById("logged-in");
    const notLoggedInButtons = document.getElementById("not-logged-in");
    const logoutBtn = document.getElementById("logout-btn");

    // Set up auth state listener
    handleAuthStateChanged(loggedInButtons, notLoggedInButtons);

    // Add logout event listener
    if (logoutBtn) {
        logoutBtn.addEventListener("click", handleLogout);
    }
</script>
